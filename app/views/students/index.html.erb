<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.15.0/font/bootstrap-icons.css" rel="stylesheet">
<style>

</style>
<div class="d-flex justify-content-end my-4">
	<div  class="container  h3 d-flex justify-content-center text-dark-emphasis border-bottom border-primary-subtle ">
		Student Index
	</div>

	<span>
		<%= link_to "Create Student", new_student_path, class: "btn btn-outline-success" %>
  </span>
</div>

<div class="table-responsive-sm my-4">

<table class="table align-middle  border border-4  shadow p-3 mb-5 border-primary-subtle ">
	<thead class="table-dark ">
		<tr>
  			<th scope="col" >ID</th>
    		<th scope="col" >Name</th>
   			<th scope="col" >Age</th>
    		<th scope="col" >Father</th>
   			<th scope="col" >Phone_number</th>
    		<th scope="col" >Email</th>
        <th scope="col" >Guardian</th>
        <th scope="col" >date_of_birth</th>
        <th scope="col" >Gender</th>
    		<th scope="col" >Blood_group</th>
    		<th scope="col" >Section</th>
    		<th scope="col" >Show</th>
   			<th scope="col" >Edit</th>
    		<th scope="col" >Delete</th>
  		</tr>
  	</thead>
  	<tbody>
  		<% @students.each do |student|%>
  			<tr>
  				<td class="text-secondary"><%= student.id %></td>
    			<td><%= student.name %></td>
    			<td><% if student.age <= 60 %>
            <%= student.age %>
            <% else %>
            <script>
              alert("Error: Student range must be less than or equal to 60.");
            </script>
            Maximum limit exceeded
            <% end %>
          </td>
    			<td><%= student.father_name %></td>
    			<td>
            <% if student.phone_number.present? %>
              <% student_phone_number = "#{student.phone_number[0..3]}- #{student.phone_number[4..10]}" %>
              <%= student_phone_number %>
             <% else %>
              No phone number provided
            <% end %>
          </td>
   				<td><%= student.email %></td>
          <td><%= student.guardian_no %></td>
          <td><%= student.date_of_birth&.strftime('%m-%d-%Y') %></td>
          <td><%= student.gender %></td>
    			<td><% if /(A\+|A\-|B\+|B\-|AB\+|AB\-|O\+|O\-)/.match?(student.blood_group) %>
            <%= student.blood_group %>
            <% else %>
            <script>
              alert("enter a correct blood group like A+")
            </script>
            invalid blood group
            <% end %>
            </td>

					<td>
						<%= link_to student.section.name, section_path(student.section) %>
					</td>
    			<td class="action">
    			<!-- <= link_to("Show", '/students', :class => 'action show' ) %> -->
						<%= link_to(student_path(student), class: "btn btn-outline-primary") do %>
							<i class="bi bi-eye"></i>
						<% end %>
    			<td class="action">
						<%#= link_to("Edit", edit_student_path(student),:data => { confirm: "Are you sure you want to Edit this student?" }, class: "btn btn btn-outline-info bi bi-pencil"  ) %>
						<%= link_to(edit_student_path(student), data: { confirm: "Are you sure you want to Edit this student?" }, class: "btn btn-outline-info") do %>
							<i class="bi bi-pencil"></i>
						<%end%>
					</td>
          <td class="action">
            <%#= button_to 'Delete', student_path(student), method: :delete, data: { confirm: 'Are you sure you want to delete this student?' }, class: 'btn btn btn-outline-danger', form: { class: 'd-inline' } %>
						<%= button_to student_path(student), method: :delete, data: { confirm: 'Are you sure you want to delete this student?' }, class: 'btn btn-outline-danger d-inline' do %>
							<i class="bi bi-trash"></i>
						<% end %>

					</td>
  			</tr>
  	<% end %>
	</tbody>
</table>
</div>
